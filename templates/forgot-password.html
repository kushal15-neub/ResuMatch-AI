<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password - ResuMatch AI</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'auth-styles.css' %}" />
  </head>
  <body>
    <div class="auth-container">
      <!-- Forgot Password Form -->
      <div class="auth-form-container">
        <div class="auth-form-wrapper">
          <!-- Logo and Back Link -->
          <div class="auth-header">
            <a href="{% url 'login' %}" class="back-link">
              <i class="fas fa-arrow-left"></i>
              <span>Back to Login</span>
            </a>
            <div class="logo-section">
              <div class="logo-icon">
                <i class="fas fa-robot"></i>
              </div>
              <h1>Forgot Password?</h1>
              <p>
                Don't worry! Enter your email and we'll send you a reset link.
              </p>
            </div>
          </div>

          <!-- Django Messages -->
          {% if messages %} {% for message in messages %}
          <div
            class="alert alert-{{ message.tags }} {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% elif message.tags == 'info' %}alert-info{% endif %}"
          >
            <i
              class="fas fa-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}exclamation-circle{% elif message.tags == 'info' %}info-circle{% endif %}"
            ></i>
            {{ message }}
          </div>
          {% endfor %} {% endif %}

          <!-- Forgot Password Form -->
          <form
            class="auth-form"
            method="POST"
            action="{% url 'forgot_password' %}"
            id="forgotPasswordForm"
          >
            {% csrf_token %}
            <div class="form-group">
              <label for="email">
                <i class="fas fa-envelope"></i>
                Email Address
              </label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-control"
                placeholder="Enter your registered email address"
              />
            </div>

            <button
              type="submit"
              class="btn btn-primary auth-btn"
              id="submitBtn"
            >
              <span class="btn-text">Send Reset Link</span>
              <span class="btn-loading">
                <i class="fas fa-spinner fa-spin"></i>
                Sending...
              </span>
            </button>
          </form>

          <!-- Alternative Options -->
          <div class="alternative-options">
            <div class="divider">
              <span>Or try these options</span>
            </div>
            <div class="option-buttons">
              <button
                type="button"
                class="btn btn-outline-secondary option-btn"
                onclick="callSupport()"
              >
                <i class="fas fa-phone"></i>
                Call Support
              </button>
              <button
                type="button"
                class="btn btn-outline-secondary option-btn"
              >
                <i class="fas fa-comments"></i>
                Live Chat
              </button>
            </div>
          </div>

          <!-- Back to Login -->
          <div class="auth-footer">
            <p>
              Remember your password? <a href="{% url 'login' %}">Login here</a>
            </p>
          </div>
        </div>
      </div>

      <!-- Right Side Content -->
      <div class="auth-content">
        <div class="ai-core-graphic"></div>
        <div class="content-wrapper">
          <div class="content-text">
            <h2>We're Here to Help</h2>
            <p>
              Our support team is available 24/7 to assist you with any
              account-related issues.
            </p>
          </div>
          <div class="content-features">
            <div class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="feature-text">
                <h4>Secure Reset Process</h4>
                <p>Your account security is our top priority</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="feature-text">
                <h4>Quick Recovery</h4>
                <p>Get back to building resumes in minutes</p>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-headset"></i>
              </div>
              <div class="feature-text">
                <h4>24/7 Support</h4>
                <p>Our team is always ready to help</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div
      class="modal fade"
      id="successModal"
      tabindex="-1"
      aria-labelledby="successModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body text-center p-4">
            <div class="success-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <h4 class="mt-3">Check Your Email!</h4>
            <p class="text-muted">
              We've sent a password reset link to your email address. Please
              check your inbox and follow the instructions.
            </p>
            <div class="mt-4">
              <button
                type="button"
                class="btn btn-primary"
                data-bs-dismiss="modal"
              >
                Got it!
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'auth-script.js' %}"></script>

    <script>
      function callSupport() {
        const phoneNumber = "+8801721254024";

        // Check if running on mobile device
        if (
          /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
            navigator.userAgent
          )
        ) {
          // For mobile devices, use tel: protocol
          window.location.href = `tel:${phoneNumber}`;
          alert("Initiating call to support...");
        } else {
          // For desktop devices, show a message or copy to clipboard
          if (navigator.clipboard) {
            navigator.clipboard
              .writeText(phoneNumber)
              .then(() => {
                alert(
                  `Phone number ${phoneNumber} has been copied to clipboard. Please use your phone to call this number.`
                );
              })
              .catch(() => {
                alert(`Please call our support number: ${phoneNumber}`);
              });
          } else {
            alert(`Please call our support number: ${phoneNumber}`);
          }
        }
      }
    </script>
  </body>
</html>
